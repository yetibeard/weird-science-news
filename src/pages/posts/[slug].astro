---
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
  const postImports = import.meta.glob("../../content/*.md");
  return Object.entries(postImports).map(([path, loader]) => {
    const slug = path.split("/").pop().replace(".md", "");
    return {
      params: { slug },
      props: { loader },
    };
  });
}

const { loader } = Astro.props;
const { default: Content, frontmatter } = await loader();
---

<BaseLayout 
  title={frontmatter.title}
  description={frontmatter.summary}
  image={frontmatter.image}>
  <div class="max-w-3xl mx-auto">
    <a href="/" class="text-blue-600 dark:text-blue-400 hover:underline">&larr; Back</a>
    <h1 class="text-4xl font-bold mt-4 mb-2 text-gray-900 dark:text-gray-100">{frontmatter.title}</h1>
    <p class="text-gray-600 dark:text-gray-400 mb-6">{new Date(frontmatter.date).toLocaleDateString()}</p>
    <article class="prose dark:prose-invert prose-lg max-w-none">
      <Content />
    </article>
  </div>
</BaseLayout>
