---
import SEO from "../components/SEO.astro";

const postImports = import.meta.glob("../content/*.md", { eager: true });

const posts = Object.entries(postImports)
  .map(([path, mod]) => {
    const slug = path.split("/").pop().replace(".md", "");
    return {
      ...mod.frontmatter,
      slug,
    };
  })
  .sort((a, b) => new Date(b.date) - new Date(a.date)); // newest first

// Create structured data for the website
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: "Weird Science News",
  description:
    "Explore fascinating and unusual discoveries from the world of science",
  url: import.meta.env.SITE || "https://weird-science-news.com",
  publisher: {
    "@type": "Organization",
    name: "Weird Science News",
    logo: {
      "@type": "ImageObject",
      url: "/images/logo.png",
    },
  },
};
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <SEO />
    <link rel="stylesheet" href="/styles/global.css" />
    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />
  </head>
  <body class="max-w-3xl mx-auto p-6">
    <h1 class="text-5xl font-bold mb-6">ðŸ§ª Weird Science News</h1>
    <ul>
      {
        posts.map((post) => (
          <li class="mb-4">
            <a
              href={`/posts/${post.slug}`}
              class="text-xl text-blue-600 hover:underline"
            >
              {post.title}
            </a>
            <p class="text-gray-600">{post.summary}</p>
          </li>
        ))
      }
    </ul>
  </body>
</html>
