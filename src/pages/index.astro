---
import fs from "fs";
import path from "path";
import matter from "gray-matter";

import { fileURLToPath } from "url";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
const contentDir = path.join(__dirname, "../content");
const files = fs.readdirSync(contentDir);
const posts = files.map((file) => {
  const content = fs.readFileSync(path.join(contentDir, file), "utf-8");
  const { data } = matter(content);
  return { ...data, slug: file.replace(".md", "") };
});
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Weird Science News</title>
    <link rel="stylesheet" href="/styles/global.css" />
  </head>
  <body class="max-w-3xl mx-auto p-6">
    <h1 class="text-5xl font-bold mb-6">ðŸ§ª Weird Science News</h1>
    <ul>
      {
        posts.map((post) => (
          <li class="mb-4">
            <a
              href={`/posts/${post.slug}`}
              class="text-xl text-blue-600 hover:underline"
            >
              {post.title}
            </a>
            <p class="text-gray-600">{post.summary}</p>
          </li>
        ))
      }
    </ul>
  </body>
</html>
